<center><img src="https://capsule-render.vercel.app/api?type=waving&color=gradient&height=200&section=header&text=heemusic&fontSize=80&fontAlignY=35&animation=twinkling&fontColor=gradient" /></center>

[![Version][version-shield]](version-url)
[![Contributors][contributors-shield]][contributors-url]
[![Forks][forks-shield]][forks-url]
[![Stargazers][stars-shield]][stars-url]
[![Issues][issues-shield]][issues-url]
[![Support Server][support-shield]][support-server]
[![MIT License][license-shield]][license-url]
[![Run on Repl.it](https://repl.it/badge/github/oniichanx/heemusic)](https://repl.it/github/oniichanx/heemusic)
[![Remix on Glitch](https://cdn.glitch.com/2703baf2-b643-4da7-ab91-7ee2a2d00b5b%2Fremix-button.svg)](https://glitch.com/edit/#!/import/github/oniichanx/heemusic)

<!-- PROJECT LOGO -->
<br />
<p align="center">
  <a href="https://github.com/oniichanx/heemusic">
    <img src="https://media.discordapp.net/attachments/721455382177906828/1171111436722913340/IMG_5984.jpg" alt="heemusic" width="200" height="200">
  </a>

  <h1 align="center">heemusic</h1>

  <p align="center">heemusic is a Discord music bot that uses Discord.js, Shoukaku, and TypeScript.
    <br />
    <br />
    <a href="https://discord.com/api/oauth2/authorize?client_id=875635121770889257&permissions=8&scope=bot%20applications.commands">Invite heemusic</a>
    ¬∑
    <a href="https://github.com/oniichanx/heemusic/issues">Report Bug & Request Feature</a>
  </p>
</p>

## üî• Unique Features

-   Developed using Typescript and Discord.js v14
-   Advanced Music System
-   Customizable Prefix
-   Powerful Search Engine
-   12 + Music Filters
-   Hybrid Command Handling (Slash and Normal Commands)
-   Highly Configurable
-   User-friendly and Easy to Use
-   24/7 Music Playback
-   Playlist commands
-   Music channel system

## üé∂ Support Sources

üîç **Default Sources**:

-   ![YouTube](https://img.shields.io/badge/YouTube-FF0000?style=plastic&logo=youtube&logoColor=white) ([Required Plugin][youtube-source])
-   ![SoundCloud](https://img.shields.io/badge/SoundCloud-FF3300?style=plastic&logo=soundcloud&logoColor=white)
-   ![Twitch](https://img.shields.io/badge/Twitch-9146FF?style=plastic&logo=twitch&logoColor=white)
-   ![Bandcamp](https://img.shields.io/badge/Bandcamp-629AA9?style=plastic&logo=bandcamp&logoColor=white)
-   ![Vimeo](https://img.shields.io/badge/Vimeo-1AB7EA?style=plastic&logo=vimeo&logoColor=white)
-   ![Nico](https://img.shields.io/badge/Nico-FF0066?style=plastic&logo=nico&logoColor=white)
-   ![Mixer](https://img.shields.io/badge/Mixer-FFA500?style=plastic&logo=mixer&logoColor=white)
-   ![http](https://img.shields.io/badge/http-FFA500?style=plastic&logo=http&logoColor=white)

üîå **Plugin Sources**: `(Require: LavaLink v4.1.x)`

**Note: You need to install the plugins to use these sources**

-   ![Spotify](https://img.shields.io/badge/Spotify-1ED760?style=plastic&logo=spotify&logoColor=white) ([Required Plugin][LavaSrc])
-   ![Deezer](https://img.shields.io/badge/Deezer-FF0000?style=plastic&logo=deezer&logoColor=white) ([Required Plugin][LavaSrc])
-   ![Apple Music](https://img.shields.io/badge/Apple%20Music-000000?style=plastic&logo=apple-music&logoColor=white) ([Required Plugin][LavaSrc])
-   ![Yandex Music](https://img.shields.io/badge/Yandex%20Music-FF0066?style=plastic&logo=yandex-music&logoColor=white) ([Required Plugin][LavaSrc])
-   ![Mixcloud](https://img.shields.io/badge/Mixcloud-51C4D3?style=plastic&logo=mixcloud&logoColor=white) ([Required Plugin][skybot-lavalink-plugin])
-   ![Ocremix](https://img.shields.io/badge/Ocremix-FF6600?style=plastic&logo=ocremix&logoColor=white) ([Required Plugin][skybot-lavalink-plugin])
-   ![Clyp](https://img.shields.io/badge/Clyp-6BB5A6?style=plastic&logo=clyp&logoColor=white) ([Required Plugin][skybot-lavalink-plugin])
-   ![Reddit](https://img.shields.io/badge/Reddit-FF4500?style=plastic&logo=reddit&logoColor=white) ([Required Plugin][skybot-lavalink-plugin])
-   ![Getyarn](https://img.shields.io/badge/Getyarn-FF9000?style=plastic&logo=getyarn&logoColor=white) ([Required Plugin][skybot-lavalink-plugin])
-   ![TikTok](https://img.shields.io/badge/TikTok-FF2D55?style=plastic&logo=tiktok&logoColor=white) ([Required Plugin][skybot-lavalink-plugin])
-   ![Soundgasm](https://img.shields.io/badge/Soundgasm-F1672F?style=plastic&logo=soundgasm&logoColor=white) ([Required Plugin][skybot-lavalink-plugin])
-   ![Text To Speech](https://img.shields.io/badge/Text%20To%20Speech-3080ff?style=plastic&logo=google-translate&logoColor=white) ([Required Plugin][skybot-lavalink-plugin])

[youtube-source]: https://github.com/lavalink-devs/youtube-source
[LavaSrc]: https://github.com/TopiSenpai/LavaSrc
[skybot-lavalink-plugin]: https://github.com/DuncteBot/skybot-lavalink-plugin

### To Setup a Lavalink server on Windows, Linux, or Replit, [Click Here.](https://github.com/LucasB25/lavalink-server)

### **Need Help with plugins?** Join our [Discord Server]([support-server]) and ask for help in the `#support` channel.

## üîß Requirements

Before starting with the installation, you need to have the following:

-   ![Node.js](https://img.shields.io/badge/Node.js-43853D?style=for-the-badge&logo=node.js&logoColor=white) [v18.17.1 or higher](https://nodejs.org/en/download/)
-   ![Lavalink](https://img.shields.io/badge/Lavalink-7289DA?style=for-the-badge&logo=discord&logoColor=white) [v4.0.x or higher](https://github.com/freyacodes/Lavalink)

### Optional

-   ![MongoDB](https://img.shields.io/badge/MongoDB-47A248?style=for-the-badge&logo=mongodb&logoColor=white) [Optional](https://www.mongodb.com/try/download/community) (For MongoDB database)
-   ![PostgreSQL](https://img.shields.io/badge/PostgreSQL-336791?style=for-the-badge&logo=postgresql&logoColor=white) [Optional](https://www.postgresql.org/download/) (For PostgreSQL database)

-   ![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white) [Optional](https://www.docker.com/) (For Docker Installation)
-   ![Docker-Compose](https://img.shields.io/badge/Docker--Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white) [Optional](https://docs.docker.com/compose/) (For Docker Installation)

## üöÄ Installation from source

1. Clone the heemusic repository:

```bash
git clone https://github.com/oniichanx/heemusic.git
```

2. Change to the heemusic directory:

```bash
cd heemusic
```

3. Install the required packages:

```bash
npm i
```

4. Set up your environment variables:

Create a `.env` file in the root directory of your project with the following variables:
or you can use the [.env.example](https://raw.githubusercontent.com/oniichanx/heemusic/main/.env.example) file

```bash
TOKEN = "" # Your bot token.
CLIENT_ID = "" # Your bot's client ID (If this value is left blank, bots cannot be invited using /invite or /about commands.).
PREFIX = "!" # Your prefix.
OWNER_IDS = ["",""] # Your discord id (You can add multiple ids.).
GUILD_ID = "" # Your server ID (If you want to use the for single server).
PRODUCTION = "true" # true for production.
BOT_STATUS = "online" # Your bot status (online, dnd, idle, invisible or offline).
BOT_ACTIVITY_TYPE = 0 # Activity type is a number from 0 to 5. See more here: https://discord.com/developers/docs/topics/gateway-events#activity-object-activity-types
BOT_ACTIVITY = "Heemusic" # Your bot activity
DATABASE_URL = "" # Your database url (If you want to use sqlite, then you can leave it blank.).
AUTO_NODE = "false" # true for auto node. It is gave from lavainfo-api (https://lavainfo-api.deno.dev).
LAVALINK_URL = "lavalink:2333" # Your lavalink url
LAVALINK_AUTH = "youshallnotpass" # Your lavalink password
LAVALINK_NAME = "oniichanx" # Your lavalink name
LAVALINK_SECURE = "false" # true for secure Lavalink (If auto node is true, then you can leave it blank.).
SEARCH_ENGINE = "ytsearch" # ytsearch (YouTube Search), spsearch (Spotify Search), scsearch (SoundCloud Search) or ytmsearch (YouTube Music Search).
MAX_PLAYLIST_SIZE = "100" # Max playlist size.
MAX_QUEUE_SIZE = "100" # Max queue size.
KEEP_ALIVE = "false" # true for keep alive in https://replit.com
LOG_CHANNEL_ID = "" # If you enter this, you will be able to receive the status of Lavalink nodes and guild join/leave logs through the corresponding channel.
```

## Prisma Setup

1. Generate the Prisma client:

```bash
npm run prisma:push
```

2. Run the migrations:

```bash
npm run prisma:migrate
```

5. Run the bot:

```bash
npm start
```

If you are using Windows, start run.bat.
if your Prisma client is not generated then follow the below steps [Prisma Setup](#prisma-setup)

6. Invite the bot to your server:

Generate an invite link for your bot and invite it to your server using the Discord Developer Portal or using permissions calculator: <https://discordapi.com/permissions.html>


## üöÄ Installation using Docker Compose

This section assumes you have Docker and Docker Compose installed and running correctly.

Download the [docker-compose.yml file](https://raw.githubusercontent.com/oniichanx/heemusic/main/docker-compose.yml) in a seperate folder like heemusic.

Edit docker-compose.yml and make sure to set the following variables:

your .env file should look like this or you can use the [.env.example](https://raw.githubusercontent.com/oniichanx/heemusic/main/.env.example) file

```yaml
TOKEN="." # Your bot token and remember, don't show everyone your bot token
PREFIX="!" # Your prefix
OWNER_IDS=["859640640640640640","859640640640640640"] # Your discord id, you can add multiple ids
GUILD_ID="859640640640640640" # Your server ID (if you want to use it for a single server)
PRODUCTION="true" # "true" for production

```

For more information how to fill all the variables go to this page.
You do not need to edit anything like the LAVA_LINK_URL, LAVA_LINK_AUTH, LAVA_LINK_NAME, LAVA_LINK_SECURE, DATABASE_URL, and the ports unless you know what you're doing.

After saving your changes you can open a terminal and go to the same location as the docker-compose.yml file. Then run the following:

```bash
docker-compose up -d
```

The above command will start all your services and your bot should be up and running!

To update, you only have to type the following:

```bash
docker-compose up --force-recreate --build -d
image prune -f
```

You can automate this by using [Watchtower](https://github.com/containrrr/watchtower). The following should be sufficient:

```bash
docker run --detach \
    --name watchtower \
    --volume /var/run/docker.sock:/var/run/docker.sock \
    --restart on-failure \
    containrrr/watchtower --cleanup
```

Do note that the bot will restart itself to update to the latest!

## üîó Useful Links

-   ![Node.js](https://img.shields.io/badge/Node.js-43853D?style=for-the-badge&logo=node.js&logoColor=white) [Node.js](https://nodejs.org/en/download/)
-   ![Discord.js](https://img.shields.io/badge/Discord.js-7289DA?style=for-the-badge&logo=discord&logoColor=white) [Discord.js](https://discord.js.org/#/)
-   ![Lavalink](https://img.shields.io/badge/Lavalink-7289DA?style=for-the-badge&logo=discord&logoColor=white) [Lavalink](https://github.com/lavalink-devs/Lavalink)
-   ![MongoDB](https://img.shields.io/badge/MongoDB-47A248?style=for-the-badge&logo=mongodb&logoColor=white) [MongoDB](https://www.mongodb.com/try/download/community)
-   ![PostgreSQL](https://img.shields.io/badge/PostgreSQL-336791?style=for-the-badge&logo=postgresql&logoColor=white) [PostgreSQL](https://www.postgresql.org/download/)
-   ![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white) [Docker](https://www.docker.com/)
-   ![Docker-Compose](https://img.shields.io/badge/Docker--Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white) [Docker-Compose](https://docs.docker.com/compose/)

## üìù Tutorial

A Tutorial has been uploaded on YouTube, Watch it by clicking [here](https://youtu.be/x5lQD2rguz0).

## üìö Commands

<details><summary>Click to View Commands</summary>

| Name         | Description                           | Options                                     |
| ------------ | ------------------------------------- | ------------------------------------------- |
| `prefix`     | Shows the bot's prefix                |                                             |
| `help`       | Shows the help menu                   | `command`: The command you want to get info |
|              |                                       | on                                          |
| `info`       | Shows information about the bot       |                                             |
| `invite`     | Sends the bot's invite link           |                                             |
| `ping`       | Shows the bot's ping                  |                                             |
| `clearqueue` | Clears the queue                      |                                             |
| `join`       | Joins the voice channel               |                                             |
| `leave`      | Leaves the voice channel              |                                             |
| `nowplaying` | Shows the currently playing song      |                                             |
| `play`       | Plays a song from YouTube or Spotify  | `song`: The song you want to play           |
| `pause`      | Pauses the current song               |                                             |
| `queue`      | Shows the current queue               |                                             |
| `remove`     | Removes a song from the queue         | `song`: The song number                     |
| `resume`     | Resumes the current song              |                                             |
| `seek`       | Seeks to a certain time in the song   |                                             |
| `shuffle`    | Shuffles the queue                    |                                             |
| `skip`       | Skips the current song                |                                             |
| `skipto`     | Skips to a specific song in the queue |                                             |
| `stop`       | Stops the music and clears the queue  |                                             |
| `volume`     | Sets the volume of the player         | `number`: The volume you want to set        |

</details>

### Errors

![image](https://cdn.discordapp.com/attachments/1147388529085780078/1165972143146815518/image_1.png)

- Fix this error to add database name in end of the `DATABASE_URL` like this `mongodb+srv://xxyydd:ejejeje@cluster0.f93tcdq.mongodb.net/Bot`

## ‚òï Donate

Do you like this project? Support it by donating

[![ko-fi](https://ko-fi.com/img/githubbutton_sm.svg)](https://ko-fi.com/oniichanx)
[![paypal](https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif)](https://www.paypal.me/oniichanx)

## üë• Contributors

Thanks go to these wonderful people:

<a href="https://github.com/oniichanx/heemusic/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=oniichanx/heemusic" />
</a>

[version-shield]: https://img.shields.io/github/package-json/v/oniichanx/heemusic?style=for-the-badge
[contributors-shield]: https://img.shields.io/github/contributors/oniichanx/heemusic.svg?style=for-the-badge
[contributors-url]: https://github.com/oniichanx/heemusic/graphs/contributors
[forks-shield]: https://img.shields.io/github/forks/oniichanx/heemusic.svg?style=for-the-badge
[forks-url]: https://github.com/appujet/oniichanx/network/members
[stars-shield]: https://img.shields.io/github/stars/oniichanx/heemusic.svg?style=for-the-badge
[stars-url]: https://github.com/oniichanx/heemusic/stargazers
[issues-shield]: https://img.shields.io/github/issues/oniichanx/heemusic.svg?style=for-the-badge
[issues-url]: https://github.com/oniichanx/heemusic/issues
[license-shield]: https://img.shields.io/github/license/oniichanx/heemusic.svg?style=for-the-badge
[license-url]: https://github.com/oniichanx/heemusic/blob/master/LICENSE
[support-server]: https://discord.gg/oniichanx
[support-shield]: https://img.shields.io/discord/942117923001098260.svg?style=for-the-badge&logo=discord&colorB=7289DA
